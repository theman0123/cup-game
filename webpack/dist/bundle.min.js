!function(e){function t(t){for(var i,r,o=t[0],c=t[1],p=t[2],h=0,u=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&u.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(l&&l(t);u.length;)u.shift()();return a.push.apply(a,p||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},n={0:0},a=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var p=0;p<o.length;p++)t(o[p]);var l=c;a.push([2,1]),s()}({2:function(e,t,s){"use strict";s.r(t);var i=s(1),n=s(0),a=function(){function e(e){this.scene=e,this.enabled=!1}return e.prototype.set_input=function(e){this.scene.input.keyboard.removeAllListeners("keydown"),this.scene.input.keyboard.removeAllListeners("keyup"),this.scene.input.keyboard.on("keydown",this.process_input,this),this.scene.input.keyboard.on("keyup",this.process_input,this),this.user_inputs=e,this.enabled=!0},e.prototype.getClassMethod=function(e,t,s){var i;return{classMethod:(i=this.scene[t][s])[e],classContext:i}},e.prototype.process_input=function(e){if(this.enabled&&this.user_inputs){var t=this.user_inputs[e.type][e.key],s=this.user_inputs,i=s.objectClass,n=s.playerPriority;if(t&&t.method){var a=this.getClassMethod(t.method,i,n),r=a.classMethod,o=a.classContext;r.apply(o)}}},e}(),r=function(e){function t(t){var s=e.call(this,{key:t})||this;return s.players=[],s.prefabs={},s.groups={},s}return Object(n.b)(t,e),t.prototype.init=function(e){this.level_data=e.level_data},t.prototype.create=function(){var e=this;this.players,this.groups;if(this.level_data){if(this.level_data.groups.forEach((function(t){"players"!==t&&(e.groups[t]=e.add.group({defaultKey:t}))})),this.prefab_classes)for(var t in this.level_data.sprites){var s=this.level_data.sprites[t],i=this.cache.json.get("animations_"+s.asset_name);if("image"===s.type){var r=s.asset_name;this[r]=this.add.image(0,0,r)}"tilemap"===s.type&&(this.MapClass=new this.prefab_classes[s.group](this,s)),"items"===s.type&&(this.items=new this.prefab_classes[s.group](this,s)),"spritesheet"===s.type&&(this.players[0]=new this.prefab_classes[s.group](this,t,s.position,Object(n.a)(Object(n.a)({},s),i)))}this.user_input_data=this.cache.json.get(this.level_data.user_input.key)}this.user_input=new a(this),this.user_input&&this.user_input.set_input(this.user_input_data)},t.prototype.update=function(){for(var e in this.prefabs)this.prefabs[e].update()},t}(Phaser.Scene),o=function(e){function t(t,s,i,n){var a=e.call(this,t,i.x,i.y,n.texture,n.frame)||this;return a.scene=t,a.name=s,a.scene.add.existing(a),"players"!==n.group&&a.scene.groups[n.group].add(a),n.scale&&a.setScale(n.scale.x,n.scale.y),n.anchor&&a.setOrigin(n.anchor.x,n.anchor.y),a.scene.prefabs[s]=a,a}return Object(n.b)(t,e),t}(Phaser.GameObjects.Sprite),c=function(e){function t(t,s,i,n){var a=e.call(this,t,i.x,i.y,n.text,n.style)||this;return a.scene=t,a.name=s,a.scene.add.existing(a),a.scene.groups[n.group].add(a),n.scale&&a.setScale(n.scale.x,n.scale.y),n.anchor&&a.setOrigin(n.anchor.x,n.anchor.y),a.scene.prefabs[s]=a,a}return Object(n.b)(t,e),t}(Phaser.GameObjects.Text),p=function(e){function t(){var t=e.call(this,"TitleScene")||this;return t.prefab_classes={background:o.prototype.constructor,text:c.prototype.constructor},t}return Object(n.b)(t,e),t.prototype.start_game=function(){this.scene.start("BootScene",{scene:"east"})},t}(r),l=function(e){function t(t,s,i,n){var a=e.call(this,t,s,i,n)||this;return a.properties=n,a.scene=t,a.walking_speed=+n.walking_speed,a.body=new Phaser.Physics.Arcade.Body(t.physics.world,a),t.physics.world.enable(a),a.body.setSize(50,150),a.body.setMaxSpeed(200),a.setPosition(100,100),n.animations.map(a.createAnimations,a),a.setPipeline("Light2D"),a.setDepth(1),a.body.setBounce(.2,.2),a.body.setMass(.9),a}return Object(n.b)(t,e),t.prototype.create=function(){},t.prototype.createAnimations=function(e){var t=this.properties.animationProperties[e],s=t.frame_width,i=t.frame_height,n=t.frameRate,a=t.max,r=t.zero_pad,o=this.scene.anims.generateFrameNames(this.properties.asset_name,{end:a,zeroPad:r||2,prefix:e+"/"+e+"("+s+"x"+i+")-",suffix:".png"});this.scene.anims.create({key:e,frames:o,repeat:-1,frameRate:n}),this.anims.play("idle")},t.prototype.update=function(){},t.prototype.idle=function(){this.body.setVelocityX(0),this.anims.play("idle")},t.prototype.jump=function(){this.body.blocked.down&&this.body.setVelocityY(-480)},t.prototype.left=function(){this.body.setVelocityX(-250),this.setFlipX(!0),this.playWalkAnim()},t.prototype.right=function(){this.body.setVelocityX(250),this.setFlipX(!1),this.playWalkAnim()},t.prototype.playWalkAnim=function(){"walkR-itemhold"!==this.anims.currentAnim.key&&this.anims.play("walkR-itemhold")},t}(o),h=function(){function e(e,t){var s=this;this.scene=e,this.map=this.scene.make.tilemap({key:t.tiled_key}),this.tiles=this.map.addTilesetImage(t.tile_set_name,t.asset_name),this.scene.mapLayers={},this.map.layers.map((function(e){return s.handleLayers(e)})),this.scene.map=this.map}return e.prototype.handleLayers=function(e){var t,s=e.name;"foreground"===s&&((t=this.map.createDynamicLayer(s,this.tiles).setPipeline("Light2D")).setOrigin(0,0),t.setCollisionByProperty({collision:!0})),"background"===s&&(t=this.map.createStaticLayer(s,this.tiles)).setOrigin(0,0),"backdrop"===s&&(t=this.map.createStaticLayer(s,this.tiles)).setOrigin(0,0),t.setScale(2),this.scene.mapLayers[s]=t},e.prototype.handleObjectLayers=function(e){var t=e.objects.find((function(e){return"Start"===e.name})),s=e.objects.find((function(e){return"End"===e.name}));this.scene[e.name].setDepth(-1),this.scene[e.name].setPosition(t.x,t.y),this.scene.sunLight=this.scene.lights.addLight(600,0,1200).setIntensity(.2),this.scene.tween=this.scene.tweens.add({targets:[this.scene[e.name],this.scene.sunLight],x:s.x,y:s.y,ease:"Cubic",duration:5e3,repeat:-1,yoyo:!0}),this.scene.tweenLight=this.scene.tweens.add({targets:[this.scene.sunLight],intensity:1.5,ease:"Cubic",duration:5e3,repeat:-1,yoyo:!0})},e}(),u=function(e){function t(){var t=e.call(this,"WorldScene")||this;return t.prefab_classes={players:l.prototype.constructor,map:h.prototype.constructor},t}return Object(n.b)(t,e),t.prototype.create=function(){var t=this;if(e.prototype.create.call(this),this.lights.enable().setAmbientColor(15975008),this.lights.addLight(600,0,1200).setIntensity(1),this.map&&this.MapClass&&this.map.objects.map((function(e){return t.MapClass.handleObjectLayers(e)})),this.mainCamera=this.cameras.main,this.cameras.main.setBounds(0,0,2*this.sys.game.config.width,704),this.cameras.main.fadeIn(1e3),this.cameras.main.startFollow(this.players[0]),this.mapLayers&&this.physics.add.collider(this.players[0],this.mapLayers.foreground),this.mapLayers){s&&s.clear();var s=this.add.graphics();this.mapLayers.foreground.renderDebug(s,{tileColor:null,collidingTileColor:new Phaser.Display.Color(243,134,48,200),faceColor:null})}},t.prototype.update=function(){},t.prototype.create_object=function(e){var t={x:e.x+e.width/2,y:e.y+e.height/2};this.prefab_classes&&this.prefab_classes.hasOwnProperty(e.type)&&new this.prefab_classes[e.type](this,e.name,t,e.properties)},t}(r),d=function(e){function t(){var t=e.call(this,{key:"BootScene"})||this;return t.sceneData={scene:""},t.levels={title:{key:"TitleScene",path:"assets/levels/title_screen.json"},east:{key:"WorldScene",path:"assets/levels/east.json"}},t}return Object(n.b)(t,e),t.prototype.init=function(e){this.sceneData=e},t.prototype.preload=function(){for(var e in this.levels){var t=this.levels[e];this.load.json(e,t.path)}},t.prototype.create=function(e){var t=this.cache.json.get(this.sceneData.scene);this.scene.start("LoadingScene",{level_data:t,scene:this.levels[this.sceneData.scene].key})},t}(Phaser.Scene),y=function(e){function t(){return e.call(this,{key:"LoadingScene"})||this}return Object(n.b)(t,e),t.prototype.init=function(e){this.level_data=e.level_data;this.add.text(320,240,"Loading",{font:"48px Kells",fill:"#ffffff"})},t.prototype.preload=function(){if(this.level_data){var e=this.level_data.sprites;for(var t in e){var s=e[t];switch(s.type){case"image":this.load.image(t,s.source);break;case"spritesheet":this.load.multiatlas(s.asset_name,s.json,s.home),this.load.json("animations_"+s.asset_name,"/assets/animations/"+s.asset_name+".json");break;case"tilemap":this.load.multiatlas(s.asset_name,s.json,s.home),this.load.tilemapTiledJSON(s.tiled_key,s.tiled_source)}}this.load.json(this.level_data.user_input.key,this.level_data.user_input.path)}},t.prototype.create=function(e){this.scene.start(e.scene,{level_data:this.level_data})},t}(Phaser.Scene),f=new p,m=new u,b=new d,g=new y,_={type:i.AUTO,parent:"cup-game",width:640,height:480,physics:{default:"arcade",arcade:{debug:!0,gravity:{y:300}}},fps:{},plugins:{scene:[]}},v=new i.Game(_);v.scene.add("TitleScene",f),v.scene.add("WorldScene",m),v.scene.add("BootScene",b),v.scene.add("LoadingScene",g),v.scene.start("BootScene",{scene:"east"})}});